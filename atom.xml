<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="https://gawain-sq.github.io.git/atom.xml" rel="self"/>
  
  <link href="https://gawain-sq.github.io.git/"/>
  <updated>2020-08-29T10:50:01.395Z</updated>
  <id>https://gawain-sq.github.io.git/</id>
  
  <author>
    <name>Gawain</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>test</title>
    <link href="https://gawain-sq.github.io.git/2020/08/29/test/"/>
    <id>https://gawain-sq.github.io.git/2020/08/29/test/</id>
    <published>2020-08-29T07:04:38.000Z</published>
    <updated>2020-08-29T10:50:01.395Z</updated>
    
    <content type="html"><![CDATA[<h2 id="RHCE8"><a href="#RHCE8" class="headerlink" title="RHCE8"></a>RHCE8</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">1.安装及配置ansible:</span><br><span class="line">在 workstation 上安装并配置 ansible, 要求如下：</span><br><span class="line">安装相应的软件包</span><br><span class="line">创建一个静态 inventory 到/home/student/ansible/inventory, 清单包含：</span><br><span class="line">servera 属于 dev 组</span><br><span class="line">serverb 属于 test 组</span><br><span class="line">serverc 和 serverd 属于 prod 组</span><br><span class="line">bastion 属于 balancers 主机组</span><br><span class="line">prod 组属于 webservers 主机组</span><br><span class="line">创建一个/home/student/ansible/ansible.cfg</span><br><span class="line">使用/home/student/ansible/inventory</span><br><span class="line">角色目录为/home/student/ansible/roles</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">######################################################################################</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ssh student@workstation   (用户名和密码都是student) </span></span><br><span class="line">[student@workstation ~]$ sudo yum -y install ansible</span><br><span class="line">[student@workstation ~]$ pwd</span><br><span class="line">/home/student</span><br><span class="line">[student@workstation ~]$ mkdir -p ansible/roles</span><br><span class="line">[student@workstation ~]$ cd ansible</span><br><span class="line">[student@workstation ansible]$ vim inventory</span><br><span class="line">[dev]</span><br><span class="line">servera</span><br><span class="line"></span><br><span class="line">[test]</span><br><span class="line">serverb</span><br><span class="line"></span><br><span class="line">[prod]</span><br><span class="line">serverc</span><br><span class="line">serverd</span><br><span class="line"></span><br><span class="line">[balancers]</span><br><span class="line">bastion</span><br><span class="line"></span><br><span class="line">[webservers:children]</span><br><span class="line">prod</span><br><span class="line"></span><br><span class="line">[student@workstation ansible]$ cp -rf /etc/ansible/ansible.cfg .</span><br><span class="line">[student@workstation ansible]$ vim ansible.cfg  # 打开下面的注释，修改路径</span><br><span class="line">[defaults]</span><br><span class="line">inventory = /home/student/inventory</span><br><span class="line">roles_path = /home/student/ansible/role</span><br><span class="line">remote_user = student</span><br><span class="line">[privilege_escalation]</span><br><span class="line">become=True</span><br><span class="line">become_method=sudo      # 提权方式</span><br><span class="line">become_user=root        # 提权为root用户</span><br><span class="line">become_ask_pass=False   # 是否需要密码</span><br><span class="line"></span><br><span class="line">[student@workstation ansible]$ ansible dev --list-hosts  # 验证是否可以查看到指定的主机，验证配置文件是否有误</span><br></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">2.创建并运行ansible ad-hoc命令:</span><br><span class="line">创建 ad-hoc 脚本 /home/student/ansible/adhoc.sh，为所有节点配置 yum 仓库：</span><br><span class="line">仓库 1：</span><br><span class="line">仓库名： base</span><br><span class="line">描述为： epo_base</span><br><span class="line">Base URL：http://content.example.com/rhel8.0/x86_64/dvd/BaseOS</span><br><span class="line">开启 GPG 签名验证，密钥为：</span><br><span class="line">http://content.example.com/rhel8.0/x86_64/dvd/RPM-GPGKEY-redhat-release</span><br><span class="line">仓库的状态是 enabled</span><br><span class="line">仓库 2：</span><br><span class="line">仓库名： stream</span><br><span class="line">描述为： repo_stream</span><br><span class="line">Base URL： http://content.example.com/rhel8.0/x86_64/dvd/AppStream</span><br><span class="line">开启 GPG 签名验证，密钥为：</span><br><span class="line">http://content.example.com/rhel8.0/x86_64/dvd/RPM-GPGKEY-redhat-release</span><br><span class="line">仓库的状态是 enabled</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">######################################################################################</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ssh student@workstation   (用户名和密码都是student) </span></span><br><span class="line">[student@workstation ansible]$ ansible all -m ping -o # 检查主机是否都可以ping通</span><br><span class="line"><span class="meta">#</span><span class="bash"> 打开多个终端，方便后面测试和验证（ctrl+<span class="built_in">shift</span>+t，可以快速打开一个终端）</span></span><br><span class="line">[student@workstation ~]$ ssh student@servera</span><br><span class="line">[student@workstation ~]$ ssh student@serverb</span><br><span class="line">[student@workstation ~]$ ssh student@serverc</span><br><span class="line">[student@workstation ~]$ ssh student@serverd</span><br><span class="line">[student@workstation ~]$ ssh student@bastion</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看ansible模块帮助</span></span><br><span class="line">[student@workstation ansible]$ ansible-doc yum_repository    (shift+T 切换到最后)</span><br><span class="line"><span class="meta">#</span><span class="bash"> 开始实验</span></span><br><span class="line">[student@workstation ansible]$ pwd</span><br><span class="line">/home/student/ansible</span><br><span class="line">[student@workstation ansible]$ vim ad-hoc</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">ansible all -m yum_repositor -a "\</span><br><span class="line">name=repo_base \</span><br><span class="line">description=repo_base \</span><br><span class="line">baseurl=http://contenr.example.com/rhel8.0/x86_64/dvd/BaseOS \</span><br><span class="line">gpgcheck=yes \</span><br><span class="line">gpgkey=http://content.example.com/rhel8.0/x86_64/dvd/RPM-GPG-KEY-redhat-relese \</span><br><span class="line">file=repo_base"</span><br><span class="line">ansible all -m yum_repositor -a "\</span><br><span class="line">name=repo_stream \</span><br><span class="line">description=repo_stream \</span><br><span class="line">baseurl=http://contenr.example.com/rhel8.0/x86_64/dvd/AppStream \</span><br><span class="line">gpgcheck=yes \</span><br><span class="line">gpgkey=http://content.example.com/rhel8.0/x86_64/dvd/RPM-GPG-KEY-redhat-relese \</span><br><span class="line">file=repo_stream"</span><br><span class="line">[student@workstation ansible]$ chmod +x ad-hoc</span><br><span class="line">[student@workstation ansible]$ ./ad-hoc</span><br><span class="line"><span class="meta">#</span><span class="bash"> 验证</span></span><br><span class="line">[student@servera ~]$ yum repolist # 可以读取repo内的文件即可</span><br></pre></td></tr></tbody></table></figure><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span><span class="string">.安装软件包:</span></span><br><span class="line"><span class="string">创建/home/devops/ansible/install_packages.yml</span> <span class="string">的</span> <span class="string">playbook：</span></span><br><span class="line"><span class="string">在</span> <span class="string">dev、test、prod</span> <span class="string">组中安装</span> <span class="string">php</span> <span class="string">和</span> <span class="string">mariadb</span> <span class="string">软件包</span></span><br><span class="line"><span class="string">在</span> <span class="string">dev</span> <span class="string">组中安装</span> <span class="string">Development</span> <span class="string">Tools</span> <span class="string">包组</span></span><br><span class="line"><span class="string">在</span> <span class="string">dev</span> <span class="string">组中的主机升级所有的软件包</span></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">vim</span> <span class="string">install_packages.yml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">install</span> <span class="string">php</span> <span class="string">and</span> <span class="string">mariadb</span></span><br><span class="line">  <span class="attr">host:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="string">dev</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">test</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">prod</span></span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">install</span> <span class="string">packages</span></span><br><span class="line">      <span class="attr">yum:</span> </span><br><span class="line">        <span class="attr">name:</span> </span><br><span class="line">          <span class="bullet">-</span> <span class="string">php</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">mariadb</span></span><br><span class="line">        <span class="attr">state:</span> <span class="string">present</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">install</span> <span class="string">development</span> <span class="string">tools</span> <span class="string">group</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">install</span> <span class="string">dev</span> <span class="string">tools</span></span><br><span class="line">      <span class="attr">yum:</span> </span><br><span class="line">        <span class="attr">name:</span> <span class="string">"@Development Tools"</span></span><br><span class="line">        <span class="attr">state:</span> <span class="string">present</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">update</span> <span class="string">all</span></span><br><span class="line">      <span class="attr">yum:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">'*'</span></span><br><span class="line">        <span class="attr">state:</span> <span class="string">latest</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span><span class="string">.使用RHEL</span> <span class="attr">system role:</span></span><br><span class="line"><span class="string">安装</span> <span class="string">RHEL</span> <span class="string">system</span> <span class="string">roles</span> <span class="string">软件包，并创建一个</span> <span class="string">playbook</span> <span class="string">名字为</span> <span class="string">configure_timesync.yml</span></span><br><span class="line"><span class="string">在所有受管主机中运行</span></span><br><span class="line"><span class="string">使用</span> <span class="string">timesync</span> <span class="string">角色</span></span><br><span class="line"><span class="string">配置角色使用的时间服务器是</span> <span class="number">172.25</span><span class="number">.254</span><span class="number">.254</span></span><br><span class="line"><span class="string">配置时间同步的方式是</span> <span class="string">iburst</span></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">sudo</span> <span class="string">yum</span> <span class="string">-y</span> <span class="string">install</span> <span class="string">rhel-system-roles</span>  <span class="string">(密码student)</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">vim</span> <span class="string">ansible.cfg</span></span><br><span class="line">[<span class="string">defaults</span>]</span><br><span class="line"><span class="string">roles_path</span> <span class="string">=</span> <span class="string">/home/student/ansible/role:/usr/share/ansible/roles/</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible-galaxy</span> <span class="string">list</span>  <span class="comment"># 查看是否有系统的roles</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">cp</span> <span class="string">-rf</span> <span class="string">/usr/share/doc/rhel-system-roles/timesync/example-timesync-playbook.yml</span> <span class="string">./configure_timesync.yml</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">vim</span> <span class="string">configure_timesync.yml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">hosts:</span> <span class="string">all</span></span><br><span class="line">  <span class="attr">vars:</span></span><br><span class="line">    <span class="attr">timesync_ntp_servers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">hostname:</span> <span class="number">172.25</span><span class="number">.254</span><span class="number">.254</span></span><br><span class="line">        <span class="attr">iburst:</span> <span class="literal">yes</span></span><br><span class="line">  <span class="attr">roles:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">rhel-system-roles.timesync</span></span><br><span class="line"><span class="comment"># 验证:</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible</span> <span class="string">all</span> <span class="string">-m</span> <span class="string">shell</span> <span class="string">-a</span> <span class="string">'grep ^server /etc/chrony.conf'</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible</span> <span class="string">all</span> <span class="string">-m</span> <span class="string">shell</span> <span class="string">-a</span> <span class="string">'timedatectl | grep -B1 NTP'</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span><span class="string">.使用ansible</span> <span class="string">galaxy安装roles:</span></span><br><span class="line"><span class="string">使用名为</span> <span class="string">requirements.yml</span> <span class="string">的文件下载并安装</span> <span class="string">Ansible</span> <span class="string">Galaxy</span> <span class="string">角色到</span> <span class="string">/home/student/ansible/roles</span> <span class="string">目录中，可以从下列</span> <span class="string">URL</span> <span class="string">下载：</span></span><br><span class="line"><span class="string">http://materials.example.com/haproxy.tar</span> <span class="string">这个角色的名字叫</span> <span class="string">balance</span></span><br><span class="line"><span class="string">http://materials.example.com/phpinfo.tar</span> <span class="string">这个角色的名字叫</span> <span class="string">phpinfo</span></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">cd</span> <span class="string">roles/</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">roles</span>]<span class="string">$</span> <span class="string">vim</span> <span class="string">requirements.yml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">src:</span> <span class="string">http://materials.example.com/phpinfo.tar</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">phpinfo</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">src:</span> <span class="string">http://materials.example.com/haproxy.tar</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">balance</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">roles</span>]<span class="string">$</span> <span class="string">ansible-galaxy</span> <span class="string">install</span> <span class="string">-r</span> <span class="string">/home/student/ansible/roles/requirements.yml</span> <span class="string">-p</span> <span class="string">/home/student/ansible/roles</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">roles</span>]<span class="string">$</span> <span class="string">ansible-galaxy</span> <span class="string">list</span>  <span class="comment"># 查看是否安装了这两个role到student用户下面</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6</span><span class="string">.创建并使用role:</span></span><br><span class="line"><span class="string">在/home/devops/ansible/roles</span> <span class="string">目录中创建名为</span> <span class="string">apache</span> <span class="string">的角色，要求：</span></span><br><span class="line"><span class="string">安装</span> <span class="string">httpd</span> <span class="string">软件包，开机启动，并自动运行</span></span><br><span class="line"><span class="string">启用防火墙，开放</span> <span class="string">web</span> <span class="string">服务</span></span><br><span class="line"><span class="string">模板文件</span> <span class="string">index.html.j2，复制到/var/www/html/index.html,内容如下：</span></span><br><span class="line"><span class="string">welcome</span> <span class="string">to</span> <span class="string">HOSTNAME</span> <span class="string">on</span> <span class="string">IPADDRESS</span></span><br><span class="line"><span class="string">创建名为</span> <span class="string">newroles.yml</span> <span class="string">的</span> <span class="string">playbook，使用这个角色，对</span> <span class="string">webservers</span> <span class="string">组进行操作。</span></span><br><span class="line"><span class="string">HOSTNAME</span> <span class="string">是</span> <span class="string">FQDN</span> <span class="string">的完整主机名称。</span></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">cd</span> <span class="string">roles/</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">roles</span>]<span class="string">$</span> <span class="string">ansible-galaxy</span> <span class="string">init</span> <span class="string">apache</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">vim</span> <span class="string">roles/apache/tasks/main.yml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">install</span> <span class="string">httpd</span></span><br><span class="line">  <span class="attr">yum:</span> </span><br><span class="line">    <span class="attr">name:</span> <span class="string">httpd</span></span><br><span class="line">    <span class="attr">state:</span> <span class="string">latest</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">start</span> <span class="string">httpd</span></span><br><span class="line">  <span class="attr">service:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">httpd</span></span><br><span class="line">    <span class="attr">state:</span> <span class="string">started</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">yes</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">open</span> <span class="string">firewalld</span> <span class="string">port</span></span><br><span class="line">  <span class="attr">firewalld:</span></span><br><span class="line">    <span class="attr">service:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">permanent:</span> <span class="literal">yes</span></span><br><span class="line">    <span class="attr">state:</span> <span class="string">enabled</span></span><br><span class="line">    <span class="attr">immediate:</span> <span class="literal">yes</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">template</span> <span class="string">a</span> <span class="string">file</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">src:</span> <span class="string">index.html.j2</span></span><br><span class="line">    <span class="attr">dest:</span> <span class="string">/var/www/html/index.html</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">vim</span> <span class="string">roles/apache/templates/index.html.j2</span></span><br><span class="line"><span class="string">welcome</span> <span class="string">to</span> {{ <span class="string">ansible_fqdn</span> }} <span class="string">on</span> {{ <span class="string">ansible_default_ipv4.address</span> }}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">7</span><span class="string">.使用来自ansible</span> <span class="string">galaxy的roles:</span></span><br><span class="line"><span class="string">做此题之前，先停一下</span> <span class="string">bastion</span> <span class="string">主机上的</span> <span class="string">httpd</span> <span class="string">服务，但会导致</span> <span class="string">servera,b,c,d</span> <span class="string">重启时无法启动到登录界面，不过不影响。停止方法：</span> <span class="string">sudo</span> <span class="string">systemctl</span> <span class="string">stop</span> <span class="string">httpd</span></span><br><span class="line"><span class="string">创建一个</span> <span class="string">playbook</span> <span class="string">名字叫/home/admin/ansible/roles.yml,</span> <span class="string">要求如下：</span></span><br><span class="line"><span class="string">这个</span> <span class="string">playbook</span> <span class="string">运行在</span> <span class="string">balancers</span> <span class="string">这个主机组上，并使用</span> <span class="string">balance</span> <span class="string">的角色。</span></span><br><span class="line"><span class="string">这个角色配置一个用来在</span> <span class="string">webservers</span> <span class="string">主机组上实现一个负载均衡服务</span></span><br><span class="line"><span class="string">使用浏览器访问</span> <span class="string">balancers</span> <span class="string">主机组,</span> <span class="string">如</span> <span class="string">http://bastion.lab.example.com</span> <span class="string">可以看到如下输出：</span></span><br><span class="line"><span class="string">welcome</span> <span class="string">to</span> <span class="string">serverc.lab.example.com</span> <span class="string">on</span> <span class="number">172.25</span><span class="number">.250</span><span class="number">.12</span></span><br><span class="line"><span class="string">重新刷新浏览器，可以看到如下输出：</span></span><br><span class="line"><span class="string">welcome</span> <span class="string">to</span> <span class="string">serverd.lab.example.com</span> <span class="string">on</span> <span class="number">172.25</span><span class="number">.250</span><span class="number">.13</span></span><br><span class="line"><span class="string">这个</span> <span class="string">playbook</span> <span class="string">运行在</span> <span class="string">webservers</span> <span class="string">主机组上使用</span> <span class="string">phpinfo</span> <span class="string">的角色。</span></span><br><span class="line"><span class="string">使用浏览器</span> <span class="string">URL：bastion.lab.example.com/hello.php</span> <span class="string">访问主机组</span> <span class="string">webservers</span> <span class="string">时，看到如下输出：</span></span><br><span class="line"><span class="string">Hello</span> <span class="string">PHP</span> <span class="string">World</span> <span class="string">from</span> <span class="string">FQDN</span></span><br><span class="line"><span class="string">注意，FQDN</span> <span class="string">是主机的完整域名。</span></span><br><span class="line"><span class="string">比如，浏览器访问</span> <span class="string">URL：http://serverc.lab.example.com/hello.php</span> <span class="string">看到如下输出：</span></span><br><span class="line"><span class="string">Hello</span> <span class="string">PHP</span> <span class="string">World</span> <span class="string">from</span> <span class="string">serverc.lab.example.com</span></span><br><span class="line"><span class="string">类似的，浏览器访问</span> <span class="string">URL：http://serverd.lab.example.com/hello.php</span> <span class="string">看到如下输出：</span></span><br><span class="line"><span class="string">Hello</span> <span class="string">PHP</span> <span class="string">World</span> <span class="string">from</span> <span class="string">serverd.lab.example.com</span></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">vim</span> <span class="string">roles.yml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">use</span> <span class="string">balancer</span></span><br><span class="line">  <span class="attr">hosts:</span> <span class="string">balancers</span></span><br><span class="line">  <span class="attr">roles:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">balancer</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">user</span> <span class="string">apache</span> <span class="string">and</span> <span class="string">phpinfo</span></span><br><span class="line">  <span class="attr">hosts:</span> <span class="string">webservers</span></span><br><span class="line">  <span class="attr">roles:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">apache</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">phpinfo</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible-playbook</span> <span class="string">roles.yml</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">curl</span> <span class="string">http://bastion</span>  <span class="comment"># 静态访问</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">curl</span> <span class="string">http://bastion/hello.php</span>   <span class="comment"># 动态访问</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">8</span><span class="string">.创建并使用逻辑卷:</span></span><br><span class="line"><span class="string">创建一个</span> <span class="string">playbook</span> <span class="string">名字叫/home/devops/ansible/lv.yml，对所有的节点操作：</span></span><br><span class="line"><span class="string">创建一个逻辑卷要求如下：</span></span><br><span class="line"><span class="string">LV</span> <span class="string">创建在</span> <span class="string">vg0</span> <span class="string">这个卷组里</span></span><br><span class="line"><span class="string">LV</span> <span class="string">的名字叫</span> <span class="string">lv01</span></span><br><span class="line"><span class="string">LV</span> <span class="string">的大小是</span> <span class="string">1500M</span></span><br><span class="line"><span class="string">格式化成</span> <span class="string">ext4</span> <span class="string">文件系统</span></span><br><span class="line"><span class="string">如果</span> <span class="string">LV</span> <span class="string">的大小不满足，产生报错信息：could</span> <span class="string">not</span> <span class="string">create</span> <span class="string">lv</span> <span class="string">of</span> <span class="string">that</span> <span class="string">size</span></span><br><span class="line"><span class="string">则创建分区大小变成</span> <span class="string">800M</span></span><br><span class="line"><span class="string">如果卷组</span> <span class="string">vg0</span> <span class="string">不存在，显示错误信息:</span> <span class="string">vg</span> <span class="string">group</span> <span class="string">does</span> <span class="string">not</span> <span class="string">exist</span></span><br><span class="line"><span class="string">不要使用任何方式挂载逻辑卷</span></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">vim</span> <span class="string">lv.yml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">lv</span></span><br><span class="line">  <span class="attr">hosts:</span> <span class="string">all</span></span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">block:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">lv01</span> <span class="string">of</span> <span class="string">1500M</span></span><br><span class="line">      <span class="attr">lvol:</span> </span><br><span class="line">        <span class="attr">vg:</span> <span class="string">vg0</span></span><br><span class="line">        <span class="attr">lv:</span> <span class="string">lv01</span></span><br><span class="line">        <span class="attr">size:</span> <span class="number">1500</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ext4</span></span><br><span class="line">      <span class="attr">filesystem:</span></span><br><span class="line">        <span class="attr">fstype:</span> <span class="string">ext4</span></span><br><span class="line">        <span class="attr">dev:</span> <span class="string">/dev/vg0/lv01</span></span><br><span class="line">    <span class="attr">rescue:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">debug:</span></span><br><span class="line">        <span class="attr">msg:</span> <span class="string">con</span> <span class="string">not</span> <span class="string">create</span> <span class="string">lv</span> <span class="string">of</span> <span class="string">that</span> <span class="string">size</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">lv01</span> <span class="string">of</span> <span class="string">1500M</span></span><br><span class="line">      <span class="attr">lvol:</span> </span><br><span class="line">        <span class="attr">vg:</span> <span class="string">vg0</span></span><br><span class="line">        <span class="attr">lv:</span> <span class="string">lv01</span></span><br><span class="line">        <span class="attr">size:</span> <span class="number">800</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ext4</span></span><br><span class="line">      <span class="attr">filesystem:</span></span><br><span class="line">        <span class="attr">fstype:</span> <span class="string">ext4</span></span><br><span class="line">        <span class="attr">dev:</span> <span class="string">/dev/vg0/lv01</span></span><br><span class="line">      <span class="attr">when:</span> <span class="string">ansible_lvm.vgs.vg0</span> <span class="string">is</span> <span class="string">defined</span></span><br><span class="line">      <span class="attr">ignore_errors:</span> <span class="literal">yes</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">debug:</span></span><br><span class="line">        <span class="attr">msg:</span> <span class="string">vloume</span> <span class="string">group</span> <span class="string">does</span> <span class="string">not</span> <span class="string">exist</span></span><br><span class="line">      <span class="attr">when:</span> <span class="string">ansible_lvm.vgs.vg0</span> <span class="string">is</span> <span class="string">undefined</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible-playbook</span> <span class="string">lv.yml</span></span><br><span class="line"><span class="comment"># 使用sudo lvs查看逻辑卷大小</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">9</span><span class="string">.生成一个</span> <span class="string">hosts</span> <span class="string">文件:</span></span><br><span class="line"><span class="string">下载</span> <span class="string">http://materials.example.com/hosts.j2</span> <span class="string">的初始化模板文件到/home/devops/ansible</span> <span class="string">目录</span></span><br><span class="line"><span class="string">完成该模板，以便可以使用它以与/etc/hosts</span> <span class="string">相同的格式生成每个库存主机的文件</span></span><br><span class="line"><span class="string">创建一个</span> <span class="string">playbook</span> <span class="string">名为/home/devops/ansible/hosts.yml,</span> <span class="string">来使用模板为</span> <span class="string">dev</span> <span class="string">组中的主机生成/etc/myhosts</span> <span class="string">文件</span></span><br><span class="line"><span class="string">完成时，myhosts</span> <span class="string">文件内容为：</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="string">localhost</span> <span class="string">localhost.localdomain</span> <span class="string">localhost4</span> <span class="string">localhost4.localdomain4</span></span><br><span class="line"><span class="string">::1</span> <span class="string">localhost</span> <span class="string">localhost.localdomain</span> <span class="string">localhost6</span> <span class="string">localhost6.localdomain6</span></span><br><span class="line"><span class="number">172.25</span><span class="number">.250</span><span class="number">.10</span> <span class="string">servera.lab.example.com</span> <span class="string">servera</span></span><br><span class="line"><span class="number">172.25</span><span class="number">.250</span><span class="number">.11</span> <span class="string">serverb.lab.example.com</span> <span class="string">serverb</span></span><br><span class="line"><span class="number">172.25</span><span class="number">.250</span><span class="number">.12</span> <span class="string">serverc.lab.example.com</span> <span class="string">serverc</span></span><br><span class="line"><span class="number">172.25</span><span class="number">.250</span><span class="number">.13</span> <span class="string">serverd.lab.example.com</span> <span class="string">serverd</span></span><br><span class="line"><span class="number">172.25</span><span class="number">.250</span><span class="number">.14</span> <span class="string">bastion.lab.example.com</span> <span class="string">bastion</span></span><br><span class="line"><span class="string">注意：生成的文件顺序不对没有关系。</span></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">wget</span> <span class="string">http://materials.example.com/hosts.j2</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">vim</span> <span class="string">hosts.yml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">my</span> <span class="string">hosts</span></span><br><span class="line">  <span class="attr">hosts:</span> <span class="string">all</span></span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">template</span> <span class="string">a</span> <span class="string">file</span> <span class="string">/etc/myhosts</span></span><br><span class="line">    <span class="attr">template:</span></span><br><span class="line">      <span class="attr">src:</span> <span class="string">/home/student/ansible/hosts.j2</span></span><br><span class="line">      <span class="attr">dest:</span> <span class="string">/etc/myhosts</span></span><br><span class="line">    <span class="attr">when:</span> <span class="string">'"dev" in group_names'</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible-playbook</span> <span class="string">hosts.yml</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span><span class="string">.修改文件内容:</span></span><br><span class="line"><span class="string">创建一个</span> <span class="string">playbook</span> <span class="string">名为/home/devops/ansible/issue.yml，修改/etc/issuse</span> <span class="string">的内容，要求如下:</span> </span><br><span class="line"><span class="string">在</span> <span class="string">dev</span> <span class="string">主机组上，单行显示的内容是:</span> <span class="string">Development</span></span><br><span class="line"><span class="string">在</span> <span class="string">test</span> <span class="string">主机组上，单行显示的内容是:</span> <span class="string">Test</span></span><br><span class="line"><span class="string">在</span> <span class="string">prod</span> <span class="string">主机组上，单行显示的内容是：Production</span></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">vim</span> <span class="string">issue.yml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">replace</span> <span class="string">issue</span></span><br><span class="line">  <span class="attr">hosts:</span> <span class="string">all</span></span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">replace</span> <span class="string">development</span></span><br><span class="line">    <span class="attr">copy:</span></span><br><span class="line">      <span class="attr">content:</span> <span class="string">"Development \n"</span></span><br><span class="line">      <span class="attr">dest:</span> <span class="string">/etc/issue</span></span><br><span class="line">    <span class="attr">when:</span> <span class="string">"inventory_hostname in groups.dev"</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">replace</span> <span class="string">test</span></span><br><span class="line">    <span class="attr">copy:</span></span><br><span class="line">      <span class="attr">content:</span> <span class="string">"Test \n"</span></span><br><span class="line">      <span class="attr">dest:</span> <span class="string">/etc/issue</span></span><br><span class="line">    <span class="attr">when:</span> <span class="string">"inventory_hostname in groups.test"</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">replace</span> <span class="string">production</span></span><br><span class="line">    <span class="attr">copy:</span></span><br><span class="line">      <span class="attr">content:</span> <span class="string">"Production \n"</span></span><br><span class="line">      <span class="attr">dest:</span> <span class="string">/etc/issue</span></span><br><span class="line">    <span class="attr">when:</span> <span class="string">"inventory_hostname in groups.production"</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible-playbook</span> <span class="string">issue.yml</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible</span> <span class="string">dev</span> <span class="string">-m</span> <span class="string">shell</span> <span class="string">-a</span> <span class="string">'cat /etc/issue'</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible</span> <span class="string">test</span> <span class="string">-m</span> <span class="string">shell</span> <span class="string">-a</span> <span class="string">'cat /etc/issue'</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible</span> <span class="string">prod</span> <span class="string">-m</span> <span class="string">shell</span> <span class="string">-a</span> <span class="string">'cat /etc/issue'</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">11</span><span class="string">.创建一个</span> <span class="string">WEB</span> <span class="string">内容目录:</span></span><br><span class="line"><span class="string">创建一个</span> <span class="string">playbook</span> <span class="string">名字叫/home/devops/ansible/webcontent.yml,</span> <span class="string">要求如下：</span></span><br><span class="line"><span class="string">这个</span> <span class="string">playbook</span> <span class="string">运行在</span> <span class="string">dev</span> <span class="string">主机组</span></span><br><span class="line"><span class="string">创建/webdev</span> <span class="string">目录，要求如下：</span></span><br><span class="line"><span class="string">目录属于</span> <span class="string">webdev</span> <span class="string">组</span></span><br><span class="line"><span class="string">权限是</span> <span class="number">2755</span></span><br><span class="line"><span class="string">软链接/var/www/html/webdev</span> <span class="string">到/webdev</span></span><br><span class="line"><span class="string">在/webdev</span> <span class="string">中创建</span> <span class="string">index.html,</span> <span class="string">内容为:</span> <span class="string">Development</span></span><br><span class="line"><span class="string">通过</span> <span class="string">servera.lab.example.com/webdev/</span> <span class="string">能访问到内容</span></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">vim</span> <span class="string">webcontent.yml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">web</span> <span class="string">dir</span></span><br><span class="line">  <span class="attr">hosts:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">roles:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">apache</span></span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line"><span class="comment">#  - name: create group   (如果没有webved这个组，就增加这一段)</span></span><br><span class="line"><span class="comment">#    group:</span></span><br><span class="line"><span class="comment">#      name: webdev</span></span><br><span class="line"><span class="comment">#      state: present</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">dir</span></span><br><span class="line">    <span class="attr">file:</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">/webdev</span></span><br><span class="line">      <span class="attr">state:</span> <span class="string">directory</span></span><br><span class="line">      <span class="attr">group:</span> <span class="string">webdev</span></span><br><span class="line">      <span class="attr">mode:</span> <span class="string">'2775'</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">symbolic</span> <span class="string">link</span></span><br><span class="line">    <span class="attr">file:</span> </span><br><span class="line">      <span class="attr">src:</span> <span class="string">/webdev</span></span><br><span class="line">      <span class="attr">dest:</span> <span class="string">/var/www/html/webdev</span></span><br><span class="line">      <span class="attr">state:</span> <span class="string">link</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">web</span> <span class="string">content</span></span><br><span class="line">    <span class="attr">copy:</span></span><br><span class="line">      <span class="attr">content:</span> <span class="string">"Development \n"</span></span><br><span class="line">      <span class="attr">dest:</span> <span class="string">/webdev/index.html</span></span><br><span class="line">      <span class="attr">setype:</span> <span class="string">httpd_sys_content_t</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible-playbook</span> <span class="string">webcontent.yml</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible</span> <span class="string">dev</span> <span class="string">-m</span> <span class="string">shell</span> <span class="string">-a</span> <span class="string">"ls -ld /webdev"</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible</span> <span class="string">dev</span> <span class="string">-m</span> <span class="string">shell</span> <span class="string">-a</span> <span class="string">"ls -l /var/www/html"</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible</span> <span class="string">dev</span> <span class="string">-m</span> <span class="string">shell</span> <span class="string">-a</span> <span class="string">"cat /webdev/index.html"</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">curl</span> <span class="string">http://servera/webdev/</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">12</span><span class="string">.#</span> <span class="string">创建硬件报告：</span></span><br><span class="line"><span class="string">创建一个</span> <span class="string">playbook</span> <span class="string">名字叫/home/devops/ansible/hwreport.yml,</span> <span class="string">在所有的受管主机上创建/root/hwreport.yml,</span> <span class="string">包含如下内容：</span></span><br><span class="line"><span class="string">inventory</span> <span class="string">的主机名</span></span><br><span class="line"><span class="string">Total</span> <span class="string">memory</span> <span class="string">in</span> <span class="string">MB</span></span><br><span class="line"><span class="string">BIOS</span> <span class="string">version</span></span><br><span class="line"><span class="string">vda</span> <span class="string">size</span></span><br><span class="line"><span class="string">vdb</span> <span class="string">size</span></span><br><span class="line"><span class="string">每行均为一个键值对</span></span><br><span class="line"><span class="string">playbook</span> <span class="string">会下载</span> <span class="string">http://materials.example.com/hwreport.empty,</span> <span class="string">并修改成为</span> <span class="string">hwreport.txt</span></span><br><span class="line"><span class="string">如果硬件不存在，则对应的值为：NONE</span></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">wget</span> <span class="string">http://materials.example.com/hwreport.empty</span>  <span class="comment"># 检查变量使用</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">vim</span> <span class="string">hwreport.yml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">hw</span> <span class="string">report</span></span><br><span class="line">  <span class="attr">hosts:</span> <span class="string">all</span></span><br><span class="line">  <span class="attr">vars:</span></span><br><span class="line">    <span class="attr">hw_all:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">hw_name:</span> <span class="string">HOST</span></span><br><span class="line">      <span class="attr">hw_cont:</span> <span class="string">"<span class="template-variable">{{ inventory_hostname | default('NONE',true) }}</span>"</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">hw_name:</span> <span class="string">MEMORY</span></span><br><span class="line">      <span class="attr">hw_cont:</span> <span class="string">"<span class="template-variable">{{ ansible_memtotal_mb | default('NONE',true) }}</span>"</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">hw_name:</span> <span class="string">BIOS</span></span><br><span class="line">      <span class="attr">hw_cont:</span> <span class="string">"<span class="template-variable">{{ ansible_bios_version | default('NONE',true) }}</span>"</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">hw_name:</span> <span class="string">DISK_SIZE_VDA</span></span><br><span class="line">      <span class="attr">hw_cont:</span> <span class="string">"<span class="template-variable">{{ ansible_devices.vda.size | default('NONE',true) }}</span>"</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">hw_name:</span> <span class="string">DISK_SIZE_VDB</span></span><br><span class="line">      <span class="attr">hw_cont:</span> <span class="string">"<span class="template-variable">{{ ansible_devices.vdb.size | default('NONE',true) }}</span>"</span></span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">down</span> <span class="string">hw_temp</span></span><br><span class="line">    <span class="attr">get_url:</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">http://materials.example.com/hwreport.empty</span></span><br><span class="line">      <span class="attr">dest:</span> <span class="string">/root/hwreport.txt</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">all</span> <span class="string">report</span></span><br><span class="line">    <span class="attr">lineinfile:</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">/root/hwreport.txt</span></span><br><span class="line">      <span class="attr">regexp:</span> <span class="string">'^<span class="template-variable">{{ item.hw_name }}</span>='</span></span><br><span class="line">      <span class="attr">line:</span> <span class="string">"<span class="template-variable">{{ item.hw_name }}</span>=<span class="template-variable">{{ item.hw_cont }}</span>"</span></span><br><span class="line">    <span class="attr">loop:</span> <span class="string">"<span class="template-variable">{{ hw_all }}</span>"</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible-play</span> <span class="string">hwreport.yml</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible</span> <span class="string">all</span> <span class="string">-a</span> <span class="string">'cat /root/hwreport.txt'</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">13</span><span class="string">.#</span> <span class="string">创建一个包含密码的</span> <span class="string">vault</span> <span class="string">文件：</span></span><br><span class="line"><span class="string">vault</span> <span class="string">文件名：locker.yml</span> <span class="string">，其中包含两个变量：</span></span><br><span class="line"><span class="attr">pw_developer:</span> <span class="string">Imadev</span></span><br><span class="line"><span class="attr">pw_manager:</span> <span class="string">lmamgr</span></span><br><span class="line"><span class="string">vault</span> <span class="string">的加解密密钥为：redhat</span></span><br><span class="line"><span class="string">密钥保存在/home/devops/ansible/secret.txt</span></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">vim</span> <span class="string">ansible.cfg</span></span><br><span class="line"><span class="string">vault_password_file</span> <span class="string">=</span> <span class="string">/home/student/ansible/secret.txt</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">vim</span> <span class="string">locker.yml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">pw_developer:</span> <span class="string">Imadev</span></span><br><span class="line"><span class="attr">pw_manager:</span> <span class="string">lmamgr</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">echo</span> <span class="string">"redhat"</span> <span class="string">&gt;</span> <span class="string">secret.txt</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible-vault</span> <span class="string">encrypt</span> <span class="string">locker.yaml</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">cat</span> <span class="string">locker.yaml</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">14</span><span class="string">.#</span> <span class="string">创建用户账户</span></span><br><span class="line"><span class="string">使用</span> <span class="string">http://materials.example.com/user_list</span> <span class="string">.yml</span> <span class="string">文件和/home/devops/ansible/locker.yml文件，创建</span> <span class="string">playbook</span> <span class="string">文件</span> <span class="string">users.yml</span> <span class="string">以创建用户</span></span><br><span class="line"><span class="string">dev</span> <span class="string">和</span> <span class="string">test</span> <span class="string">主机组中创建带有工作描述为:</span> <span class="string">devopler</span> <span class="string">的用户，密码使用:</span> <span class="string">pw_developer</span> <span class="string">变量，用户的附属组为</span> <span class="string">devops</span></span><br><span class="line"><span class="string">prod</span> <span class="string">主机组中创建带有工作描述为:</span> <span class="string">manager</span> <span class="string">的用户，密码使用</span> <span class="string">pw_manager</span> <span class="string">变量，用户的附属组为</span> <span class="string">opsmgr</span></span><br><span class="line"><span class="string">密码均基于</span> <span class="string">SHA512</span> <span class="string">hash</span> <span class="string">格式创建</span></span><br><span class="line"><span class="comment">#######################################################################################</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">wget</span> <span class="string">http://materials.example.com/user_list.yml</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">vim</span> <span class="string">users.yml</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">users</span></span><br><span class="line">  <span class="attr">hosts:</span> <span class="string">all</span></span><br><span class="line">  <span class="attr">vars_files:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/home/student/ansible/user_list.yml</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/home/student/ansible/locker.yml</span></span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">group</span> <span class="string">devops</span></span><br><span class="line">    <span class="attr">group:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">devops</span></span><br><span class="line">      <span class="attr">state:</span> <span class="string">present</span></span><br><span class="line">    <span class="attr">when:</span> <span class="string">inventory_hostname</span> <span class="string">in</span> <span class="string">groups.dev</span> <span class="string">or</span> <span class="string">inventory_hostname</span> <span class="string">in</span> <span class="string">groups.test</span></span><br><span class="line">    </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">group</span> <span class="string">opsmgr</span></span><br><span class="line">     <span class="attr">group:</span></span><br><span class="line">       <span class="attr">name:</span> <span class="string">opsmgr</span></span><br><span class="line">       <span class="attr">state:</span> <span class="string">present</span></span><br><span class="line">     <span class="attr">when:</span> <span class="string">inventory_hostname</span> <span class="string">in</span> <span class="string">groups.prod</span></span><br><span class="line">     </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">user</span> <span class="string">dev</span></span><br><span class="line">    <span class="attr">user:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">"<span class="template-variable">{{ item.name }}</span>"</span></span><br><span class="line">      <span class="attr">groups:</span> <span class="string">devops</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">"<span class="template-variable">{{ pw_developer | password_hash('sha521','mysecretsalt') }}</span>"</span></span><br><span class="line">      <span class="attr">comment:</span> <span class="string">"<span class="template-variable">{{ item.job }}</span>"</span></span><br><span class="line">    <span class="attr">loop:</span> <span class="string">"<span class="template-variable">{{ users }}</span>"</span></span><br><span class="line">    <span class="attr">when:</span> <span class="string">item.job</span> <span class="string">==</span> <span class="string">'developer'</span> <span class="string">and</span> <span class="string">(inventory_hostname</span> <span class="string">in</span> <span class="string">groups.dev</span> <span class="string">or</span> <span class="string">inventory_hostname</span> <span class="string">in</span> <span class="string">groups.test)</span></span><br><span class="line">    </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">user</span> <span class="string">manager</span></span><br><span class="line">    <span class="attr">user:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">"<span class="template-variable">{{ item.name }}</span>"</span></span><br><span class="line">      <span class="attr">groups:</span> <span class="string">opsmgr</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">"<span class="template-variable">{{ pw_manager | password_hash('sha521','mysecretsalt') }}</span>"</span></span><br><span class="line">      <span class="attr">comment:</span> <span class="string">"<span class="template-variable">{{ item.job }}</span>"</span></span><br><span class="line">    <span class="attr">loop:</span> <span class="string">"<span class="template-variable">{{ users }}</span>"</span></span><br><span class="line">    <span class="attr">when:</span> <span class="string">item.jobs</span> <span class="string">==</span> <span class="string">'manager'</span> <span class="string">and</span> <span class="string">inventory_hostname</span> <span class="string">in</span> <span class="string">groups.prod</span></span><br><span class="line">[<span class="string">student@workstation</span> <span class="string">ansible</span>]<span class="string">$</span> <span class="string">ansible-playbook</span> <span class="string">users.yml</span></span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;RHCE8&quot;&gt;&lt;a href=&quot;#RHCE8&quot; class=&quot;headerlink&quot; title=&quot;RHCE8&quot;&gt;&lt;/a&gt;RHCE8&lt;/h2&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://gawain-sq.github.io.git/2020/08/29/hello-world/"/>
    <id>https://gawain-sq.github.io.git/2020/08/29/hello-world/</id>
    <published>2020-08-29T02:35:29.927Z</published>
    <updated>2020-08-29T02:35:29.927Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
</feed>
